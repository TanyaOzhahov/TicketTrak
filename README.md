# TicketTrak


Aviasales Data Pipeline (Airflow ¬∑ MongoDB ¬∑ PostgreSQL ¬∑ dbt)
üìå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–æ–ª–Ω—ã–π data pipeline –¥–ª—è —Å–±–æ—Ä–∞, —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö –æ —Ü–µ–Ω–∞—Ö –Ω–∞ –∞–≤–∏–∞–±–∏–ª–µ—Ç—ã (–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –†–æ—Å—Å–∏—è ‚Üî –î—É–±–∞–π) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º API Aviasales.

–ü–∞–π–ø–ª–∞–π–Ω –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ ELT –∏ –≤–∫–ª—é—á–∞–µ—Ç:

—Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ API,

—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—ã—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ MongoDB,

–∑–∞–≥—Ä—É–∑–∫—É –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö –≤ PostgreSQL,

–ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–ª–æ—ë–≤ (ODS / DWH),

–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—é –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Å –ø–æ–º–æ—â—å—é Apache Airflow.


üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
Aviasales API
 FastAPI (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤)
 MongoDB (RAW layer)
 Airflow ETL
 PostgreSQL (ODS / DWH)
 dbt transformations

–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

Python 3.12

FastAPI ‚Äî –ø—Ä–æ–∫—Å–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Aviasales API –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

MongoDB ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—ã—Ä—ã—Ö JSON-–æ—Ç–≤–µ—Ç–æ–≤ (RAW)

PostgreSQL ‚Äî –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –ë–î (ODS / DWH)

Apache Airflow ‚Äî –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è DAG-–æ–≤

dbt ‚Äî —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

Docker / Docker Compose

1. –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö

Airflow DAG —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –ø–æ –º–∞—Ä—à—Ä—É—Ç–∞–º –∏ –¥–∞—Ç–∞–º

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –≤ FastAPI —Å–µ—Ä–≤–∏—Å

2. RAW —Å–ª–æ–π (MongoDB)

–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã Aviasales —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ MongoDB

–•—Ä–∞–Ω—è—Ç—Å—è –≤ JSON-—Ñ–æ—Ä–º–∞—Ç–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

3. ETL (Mongo ‚Üí PostgreSQL)

Airflow DAG —á–∏—Ç–∞–µ—Ç –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ MongoDB

–ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ PostgreSQL:

aviasales.request_logs

aviasales.tickets

4. –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ (dbt)

–§–æ—Ä–º–∏—Ä—É—é—Ç—Å—è ODS –∏ DWH –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è

–ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

5. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

–†–∞—Å—á—ë—Ç —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º

–ê–Ω–∞–ª–∏–∑ –ª—É—á—à–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–∫—É–ø–∫–∏ –±–∏–ª–µ—Ç–æ–≤

–ó–∞–ø—É—Å–∫ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
docker-compose up -d

–û—Ç–∫—Ä—ã—Ç—å Airflow
http://localhost:8080

–í PostgreSQL —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –ë–î, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è:

–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏–∫—É —Ü–µ–Ω,

—Å—á–∏—Ç–∞—Ç—å —Å—Ä–µ–¥–Ω–∏–µ —Ü–µ–Ω—ã –ø–æ –º–∞—Ä—à—Ä—É—Ç–∞–º,

–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –¥–∞—Ç—ã –ø–æ–∫—É–ø–∫–∏ –±–∏–ª–µ—Ç–æ–≤.

 Analytics (Python / SQL)
